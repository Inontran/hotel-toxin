include ../logo/logo
include ../button/button
include ../dropdown/dropdown

//-
  options.classes - Классы блока.
  options.id - ИД блока.
  options.menuItems - Пукнты главного меню сайта.
  options.menuItems[0].href - Ссылка на страницу.
  options.menuItems[0].name - Текст пункта меню.
  options.menuItems[0].subitems - Массив подпунктов.
  options.buttonLoginText = 'Login' - Текст кнопки входа.
  options.buttonLoginHref - Ссылка кнопки на страницу входа.
  options.buttonRegText = 'Register' - Текст кнопки регистрации.
  options.buttonRegHref - Ссылка кнопки на страницу регистрации.
  options.username - Имя пользователя. Если этот параметр не указан, 
    то вместо имени будут находиться кнопки входа и регастрации.

mixin header(options)
  if !options
    - options = {}

  if !options.classes
    - options.classes = ''

  if !options.menuItems
    - options.menuItems = []

  if !options.buttonLoginText
    - options.buttonLoginText = 'Login'
  
  if !options.buttonRegText
    - options.buttonRegText = 'Register'


  header.header(
    class = options.classes,
    id = options.id ? options.id : false
  )
    div.header__container
      div.header__logo
        +logo()
      nav.header__main-menu
        each val, index in options.menuItems
          li.header__main-menu-item
            if val.subitems
              +dropdown({
                text: val.name,
                group: 'header-dropdowns',
                classes: 'dropdown_header'
              })
                nav.header__main-submenu
                  each val2, index2 in val.subitems
                    li.header__main-submenu-item
                      a.header__main-menu-link(href = val2.href)= val2.name
            else
              a.header__main-menu-link(href = val.href)= val.name
              

      a.header__btn-icon.header__btn-icon_profile(href = options.buttonLoginHref ? options.buttonLoginHref : false, title = 'Профиль')
        img(src = require('@/components/header/img/user_icon.svg').default, alt = 'Профиль', role = 'presentation')
      button.header__btn-icon.header__btn-icon_menu.js-header__btn_show-curtain(title = 'Меню')
        img(src = require('@/components/header/img/menu_icon.svg').default, alt = 'Меню', role = 'presentation')

      if !options.username
        div.header__btn-login
          +button({
            text: options.buttonLoginText, 
            classes: 'button_outline button_size-md',
            href: options.buttonLoginHref ? options.buttonLoginHref : false
          })
        div.header__btn-signup
          +button({
            text: options.buttonRegText, 
            classes: 'button_fill button_size-md',
            href: options.buttonRegHref ? options.buttonRegHref : false
          })
      else
        a.header__username #{options.username}