include ../expander/expander

//-
  options.classes - Классы блока.
  options.id - ИД блока.
  options.username - Имя пользователя. Если этот параметр не указан, 
    то вместо имени будут находиться кнопки входа и регастрации.
  options.buttonLoginText - Текст кнопки входа.
  options.buttonLoginHref - Ссылка кнопки входа.
  options.buttonRegText - Текст кнопки регистрации.
  options.buttonRegHref - Ссылка кнопки регистрации.
  options.menuItems - Пукнты главного меню сайта.
  options.menuItems[0].href - Ссылка на страницу.
  options.menuItems[0].name - Текст пункта меню.
  options.menuItems[0].subitems - Массив подпунктов.

mixin curtain(options = {})
  -
    const {
      classes = '',
      id = false,
      username = false, 
      buttonLoginText = '',
      buttonLoginHref = false,
      buttonRegText = '',
      buttonRegHref = false,
      menuItems = [],
    } = options;

  aside.curtain(
    class = classes,
    id = id ? id : false
  )
    div.curtain__content-wrapper.scrollbar.js-scrollbar.scrollbar_theme_catalina
      div.curtain__top
        if !username
          div.curtain__top-btn-wrapper
            +button({
              text: buttonLoginText, 
              classes: 'button_outlined button_size_md button_wide',
              href: buttonLoginHref ? buttonLoginHref : false
            })
          div.curtain__top-btn-wrapper
            +button({
              text: buttonRegText, 
              classes: 'button_filled_blue-green-gradient button_size_md button_wide',
              href: buttonRegHref ? buttonRegHref : false
            })
        else
          a.curtain__username #{username}
      
      nav.curtain__middle
        ul.curtain__main-menu
          each val, index in menuItems
            li.curtain__main-menu-item
              if val.subitems
                +expander({
                  text: val.name,
                  group: 'mobile-nav',
                  classes: 'expander_theme_green'
                })
                  nav.curtain__main-menu
                    each val2, index2 in val.subitems
                      li.curtain__main-menu-item
                        a.curtain__main-menu-link(href = val2.href) #{val2.name}
              else
                a.curtain__main-menu-link(href = val.href) #{val.name}