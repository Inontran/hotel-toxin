include ../../dropdown/dropdown
include ../../air-datepicker/air-datepicker
include ../../button/button
include ../../heading/heading

//-
  options.classes - Классы блока.
  options.id - ИД блока.
  options.roomNumber - Номер апартаментов.
  options.roomType - Тип апартаментов (люкс).
  options.price - Стоимость апартаментов.
  options.priceTime - Пометка "в сутки" или "в неделю".
  options.listService - Список услуг.
  options.listService[0].name - Название услуги.
  options.listService[0].price - Цена услуги.
  options.listService[0].tooltip - Подсказка.
  options.totalPrice - Итоговая стоимость.

mixin room-reservation(options = {})
  -
    const {
      classes = '',
      id = false,
      roomNumber = '',
      roomType = false,
      price = '',
      priceTime = '',
      listService = false,
      totalPrice = false,
    } = options;

  div.room-reservation(
    class = classes,
    id = id ? id : false
  )
    header.room-reservation__header
      div.room-reservation__header-left
        span.room-reservation__header-symbol №
        span.room-reservation__header-number #{roomNumber}
        if roomType
          span.room-reservation__header-type #{roomType}
      div.room-reservation__header-right
        span.room-reservation__header-price #{price}
        span.room-reservation__header-price-type  #{priceTime}

    div.room-reservation__dates-row
      div.room-reservation__dates-col
        +dropdown({
          classes: 'js-dropdown_dates-result',
          group: 'formBooking',
          targetId: '#dropdown-datepicker',
          inputParams: {
            label: "Прибытие",
            readonly: true,
            placeholder: "ДД.ММ.ГГГГ",
            classes: 'js-input-text_date_start',
          },
        })
      div.room-reservation__dates-col
        +dropdown({
          classes: 'js-dropdown_dates-result dropdown_dates dropdown_align_right',
          group: 'formBooking',
          id: 'dropdown-datepicker',
          inputParams: {
            label: "Выезд",
            readonly: true,
            placeholder: "ДД.ММ.ГГГГ",
            classes: 'js-input-text_date_end',
          },
        })
          +air-datepicker({
            classes: 'air-datepicker_inline',
            targetDropdown: '.js-dropdown_dates-result',
            minDate: 'today',
          })

    div.room-reservation__input-wrapper
      +dropdown({
        group: 'formBooking',
        inputParams:{
          label: "Гости",
          readonly: true,
          placeholder: "Сколько гостей"
        }
      })
        +list-counters({
          arrayCounters: [
            {
              label: "Взрослые",
              groupItemId: 1,
              textOneItems: 'гость',
              textTwoItems: 'гостя',
              textManyItems: 'гостей',
            },
            {
              label: "Дети",
              groupItemId: 1,
              textOneItems: 'гость',
              textTwoItems: 'гостя',
              textManyItems: 'гостей',
            },
            {
              label: "Младенцы",
              groupItemId: 2,
              textOneItems: 'младенец',
              textTwoItems: 'младенца',
              textManyItems: 'младенцев',
            },
          ],
        })

    if listService
      div.room-reservation__table-wrapper
        table.room-reservation__table
          each item, index in listService
            tr
              td.room-reservation__table-cell #{item.name}
              td.room-reservation__table-cell.room-reservation__table-cell_with-tooltip
                if item.tooltip
                  div.room-reservation__tooltip(title = item.tooltip)
              td.room-reservation__table-cell.room-reservation__table-cell_with-price #{item.price}

    if totalPrice
      p.room-reservation__bottom
        span.room-reservation__bottom-word Итого
        span.room-reservation__bottom-points
        span.room-reservation__bottom-price #{totalPrice}

    +button({
      text: "Забронировать",
      classes: "button_filled_blue-green-gradient button_theme_arrow button_wide",
      type: 'submit'
    })